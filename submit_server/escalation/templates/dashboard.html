{% extends 'base.html' %}

{% block header %}
  <h1>{% block title %}Dashboard{% endblock %}</h1>
{% endblock %}

{% block content %}
  <meta http-equiv="refresh" content="60">
  <form method="post">
    <h1>Science</h1>
    {{ science_table }}

    <div id="images">
      <div class="inline-block">    
        <img src="/static/demo0.png" width="250px">
      </div>
      <div class="inline-block">
        <img src="/static/demo1.png" width="250px">
      </div>
    </div>
    <h1>Automation</h1>

    <div class="auto_table">
    <table id="auto_table" class="compact hover order-column row-border" style="width:100%">
      <thead>
        <th>Crank</th>
        <th>Upload Date</th>
        <th>Number of Runs</th>
        <th>Number of Uploads</th>
      </thead>
      <tbody>
        {% for r in auto_table %}
        <tr>
          <td> {{ r['crank'] }} </td>
          <td> {{ r['upload_date'] }} </td>
          <td> {{ r['num_runs'] }} </td>                    
          <td> {{ r['num_distinct'] }} </td>                    
        </tr>
        {% endfor %}
      </tbody>
    </table>

<script>
$(document).ready(function() {
$('#auto_table').DataTable( {
        "order": [[ 0, "desc" ]],
  }
  );
  } );

</script>

</div>
    <h1>Machine Learning</h1>

    <h3>Training Data Statistics</h3>
    <div class="ml_table">
    <table id="ml_table" class="compact hover order-column row-border" style="width:100%">
      <thead>
        <th>Crank</th>
        <th>Upload Date</th>
        <th>Training Samples</th>        
        <th>Training Mean</th>
        <th>Predicted Mean</th>        
      </thead>
      <tbody>
        {% for r in ml_table %}
        <tr>
          <td> {{ r['crank'] }} </td>
          <td> {{ r['upload_date'] }} </td>
          <td> {{ r['num_train_rows'] }} </td>                    
          <td> {{ r['train_mean'] }} </td>
          <td> {{ r['pred_mean'] }} </td>                              
        </tr>
        {% endfor %}
      </tbody>
    </table>
<script>
$(document).ready(function() {
$('#ml_table').DataTable( {
        "order": [[ 0, "desc" ]],
  }
  );
  } );

</script>

  <h3>Leaderboard summary</h3>
  <table id="leaderboard_table" class="compact hover order-column row-border" style="width:100%">
    <thead>
      <th>Dataset</th>      
      <th>Name</th>      
      <th>Author</th>
      <th>Accuracy</th>
      <th>AUC</th>
      <th>F1 score</th>
      <th>Precision</th>
      <th>Recall</th>      
    </thead>
    <tbody>
    {% for r in leaderboard %}
    <tr>
      <td> {{ r['dataset_name'] }} </td>      
      <td> {{ r['model_name'] }} </td>      
      <td> {{ r['model_author'] }} </td>
      <td> {{ r['accuracy'] }} </td>
      <td> {{ r['auc_score'] }} </td>
      <td> {{ r['f1_score'] }} </td>
      <td> {{ r['precision'] }} </td>
      <td> {{ r['recall'] }} </td>      
    </tr>
    {% endfor %}
    </tbody>
  </table>
    
<script>
$(document).ready(function() {
$('#leaderboard_table').DataTable( {
        "order": [[ 0, "desc" ]],
  }
  );
  } );
</script>
    <a href="{{ url_for('leaderboard.leaderboard') }}">View full leaderboard</a>

    
    <h3>Top {{ top_n }} Most Likely Runs</h3>
    

    <div id="images">
      <div class="inline-block">    
        <img src="/static/demo3.png" width="250px">
      </div>
      <div class="inline-block">
        <img src="/static/demo2.png" width="250px">
      </div>
    </div>
    <input type="submit" value="Refresh" name="update">
  </form>

  
  
{% endblock %}
