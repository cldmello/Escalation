{% extends 'base.html' %}

{% block header %}
  <h1>{% block title %}Submissions{% endblock %}</h1>
{% endblock %}

  {% block content %}

<form method="post">
  <label for="crank">Select specific crank</label>
  <select name="crank">
    <option value="all">All</option>
    {% for crank in cranks %}
    <option value="{{ crank }}">{{ crank }} </option>
    {% endfor %}
  </select>
  <input type="submit" value="Select">
</form>

<form method="post">
  <table  id="submission_table" class="compact hover order-column row-border">
  <thead>
  <tr>
    <th></th>
    <th>Crank</th>    
    <th>User Name</th>
    <th>Name</th>
    <th>Versioned Repo Hash</th>        
    <th>Timestamp</th>                
    <th>Notes</th>
  </tr>
  </thead>
  <tbody>
{% for sub in submissions %}
  <tr>
    <td> <input type="checkbox" name="download" value="{{ sub['id'] }}" checked>
    <td> {{ sub['crank'] }} </td>  
    <td> {{ sub['username'] }} </td>
    <td> {{ sub['expname'] }} </td>
    <td> {{ sub['githash'] }} </td>    
    <td> {{ sub['created'].strftime('%m-%d-%y %H:%M') }} </td>
    <td> {{ sub['notes'][:50] + "..." }} </td>
  </tr>
  {% endfor %}
  </tbody>
  </table>

  <script type="text/javascript">
	
$(document).ready(function() {
$('#submission_table').DataTable( {
        "order": [[ 5, "desc" ]],
"columnDefs": [
    { "orderable": false, "targets": 0 }
  ]
}
);
} );

	</script>
  
  <input type="hidden" value="{{ crank }}" name="crank">
  <input type="submit" value="Download files">
</form>  

{% endblock %}
